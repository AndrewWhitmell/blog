---
title: 'Generating D3 code with LLMs'
author: rlewis
date: 2024-03-25 00:00:00 Z
summary: Can AI write software? My team at Scott Logic wanted to find out whether LLMs could generate JavaScript code to draw a D3 chart in a web page. Read about how it went in this blog post.
categories:
- Artificial Intelligence
---

My team at Scott Logic wanted to see how well large language models (LLMs) could perform on a fully automated coding task. We decided to try using an LLM to generate JavaScript code to display a chart in a web page using the [D3 library](https://d3js.org/).

We knew there would be many examples of D3 code available on the internet and so LLMs were likely to have had large amounts of relevant training data. But the task was also more complex than the short, well-defined and self-contained coding problems that LLMs are normally evaluated against. None of us had much experience with LLMs, but through experimentation we soon learned more about what to expect. We found that LLMs could often succeed in the task, but only if we provided them with the right kind of help.

## The chart generation system
Our aim was to use an LLM to produce a D3 chart based on a “user request” explaining what information the chart should display. We wanted the generated code to run automatically within a simple web page, so we needed the code to be right the first time without additional help from the user.

The system we set up for generating and displaying D3 charts uses Python to interact with the LLMs we use, and to create a JavaScript file from the output of the LLM. The resulting JavaScript file is dropped into a simple website, with a single page that loads the JavaScript file and displays the chart it produces.

A variety of Python libraries are available for interacting with LLMs. OpenAI, Hugging Face and GPT4All all have their own libraries designed to work with the models they provide. We used [LangChain](https://www.langchain.com/) to give a common interface to all those underlying libraries, allowing us to use a lot of the same code with a wide variety of LLMs. The page loads the latest version of the D3 library, which defines a global variable “d3”. Then the page executes the JavaScript file containing the code generated by the LLM. If all goes well, the generated code displays a chart.

